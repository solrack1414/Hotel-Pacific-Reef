<ion-header class="site-header">
  <ion-toolbar color="light">
    <div class="container navbar">
      <div class="brand">
        <ion-icon name="sparkles-outline"></ion-icon>
        <span>Hotel Pacific Reef</span>
      </div>
      <nav class="menu">
        <a routerLink="/home" routerLinkActive="active">{{ 'header.home' | translate }}</a>
        <a routerLink="/reservas" routerLinkActive="active">{{ 'header.reservas' | translate }}</a>
        <a routerLink="/perfil" routerLinkActive="active">{{ 'header.perfil' | translate }}</a>
        <span *ngIf="currentEmail" class="user-pill">{{ 'header.hello' | translate }} <b>{{ currentEmail }}</b></span>
        <a href="#" class="logout" (click)="logout($event)">{{ 'header.logout' | translate }}</a>
      </nav>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="site-content ion-padding">

  <!-- Filtros -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>{{ 'reservas.search' | translate }}</ion-card-title>
      <ion-card-subtitle>{{ 'reservas.minStay' | translate }}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content class="filters-grid">
      <ion-item>
        <ion-label position="stacked">{{ 'reservas.arrival' | translate }}</ion-label>
        <ion-datetime
          [(ngModel)]="llegada"
          [min]="minDate"
          [max]="maxDate"
          presentation="date"
          (ionChange)="onFechaChange()">
        </ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">{{ 'reservas.departure' | translate }}</ion-label>
        <ion-datetime
          [(ngModel)]="salida"
          [min]="minDate"
          [max]="maxDate"
          presentation="date"
          (ionChange)="onFechaChange()">
        </ion-datetime>
      </ion-item>

      <!-- Indicador de política de horas -->
      <ion-text color="medium" class="ion-margin-top">
        {{ 'reservas.checkin' | translate }} <b>14:00</b> • {{ 'reservas.checkout' | translate }} <b>12:00</b>. {{ 'reservas.stay' | translate }} <b>{{ 'reservas.nights' | translate }}</b>.
      </ion-text>

      <ion-item>
        <ion-label>{{ 'reservas.roomType' | translate }}</ion-label>
        <ion-select [(ngModel)]="tipoSeleccionado" (ionChange)="filtrar()">
          <ion-select-option value="">{{ 'reservas.all' | translate }}</ion-select-option>
          <ion-select-option value="basic">{{ 'reservas.basic' | translate }}</ion-select-option>
          <ion-select-option value="medium">{{ 'reservas.medium' | translate }}</ion-select-option>
          <ion-select-option value="premium">{{ 'reservas.premium' | translate }}</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>{{ 'reservas.onlyAvailable' | translate }}</ion-label>
        <ion-toggle [(ngModel)]="soloDisponibles" (ionChange)="filtrar()"></ion-toggle>
      </ion-item>

      <ion-text color="danger" *ngIf="errorMsg">{{ errorMsg }}</ion-text>
      <ion-note *ngIf="!errorMsg && noches > 0">
        {{ 'reservas.stay' | translate }}: <b>{{ noches }}</b> {{ (noches === 1 ? 'reservas.nights' : 'reservas.nights') | translate }} ({{ 'reservas.checkin' | translate }} 14:00 / {{ 'reservas.checkout' | translate }} 12:00)
      </ion-note>
    </ion-card-content>
  </ion-card>

  <!-- Lista de habitaciones -->
  <ion-card *ngFor="let h of filtradas">
    <!-- ... (la galería de imágenes se mantiene igual) ... -->

    <ion-card-header>
      <ion-card-title>{{ h.nombre }}</ion-card-title>
      <ion-card-subtitle>{{ h.camas || '—' }} • Cap: {{ h.capacidad || '—' }}</ion-card-subtitle>
    </ion-card-header>

    <ion-card-content>
      <p>{{ h.descripcion }}</p>

      <div class="price-line">
        <ion-badge color="primary">{{ currency(h.precioNoche) }}{{ 'reservas.perNight' | translate }}</ion-badge>
        <ion-badge color="success" *ngIf="h.disponible">{{ 'reservas.available' | translate }}</ion-badge>
        <ion-badge color="medium" *ngIf="!h.disponible">{{ 'reservas.notAvailable' | translate }}</ion-badge>
      </div>

      <div class="amenities" *ngIf="(h.amenities || []).length">
        <ion-chip *ngFor="let a of (h.amenities || [])" color="medium" outline>{{ a }}</ion-chip>
      </div>

      <ion-button
        expand="block"
        color="success"
        [disabled]="!h.disponible || noches <= 0"
        (click)="reservar(h)">
        {{ 'reservas.book' | translate }}
      </ion-button>
    </ion-card-content>
  </ion-card>

  <!-- ... (el lightbox y el footer) ... -->

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>{{ 'home.footer' | translate }}</p>
    </div>
  </footer>
</ion-content>